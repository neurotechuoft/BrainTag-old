<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
  </head>
  <body>
    <h1>BrainTag</h1>
    <!-- All of the Node.js APIs are available in this renderer process. -->
    <!--We are using Node.js <script>document.write(process.versions.node)</script>,
    Chromium <script>document.write(process.versions.chrome)</script>,
    and Electron <script>document.write(process.versions.electron)</script>-->
	<button id="zero">0</button>
	<button id="one">1</button>
	<button id="two">2</button>
	<button id="three">3</button>
	<button id="four">4</button>
	<button id="five">5</button>
	<button id="six">6</button>
	<button id="seven">7</button>
	<button id="eight">8</button>
	<button id="nine">9</button>
  Enter the number of nodes:
  <input id="num" type="number" name="points" min="0" step="1" value="5" />
  <button id="submit">Submit</button>
  <div id="chartContainer"></div>
  <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
	<!--<canvas id="speedChart" width="600" height="400"></canvas>-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

	<script src="./view.js"></script>
  <script>
  document.getElementById("submit").onclick = () => {
    document.getElementById("chartContainer").innerHTML = "";
    var num = document.getElementById("num").value;
    for (var i = 0; i < num; i++){
      var g = document.createElement('div');
      g.setAttribute("id", "chart" + i);
      var att = document.createAttribute("style");
      att.value = "height: 300px; width: 100%;";
      g.setAttributeNode(att);
      document.getElementById('chartContainer').appendChild(g);
    }

    var charts = [];
    var dps = []; // dataPoints
    for (var i = 0; i < num; i++){
      var chart = new CanvasJS.Chart("chart" + i, {
        title :{
          text: "Node " + i
        },
        axisY: {
          includeZero: false
        },
        data: [{
          type: "line",
          dataPoints: dps
        }]
      });
      charts.push(chart);
    }
    var xVal = 0;
    var yVal = 100;
    var updateInterval = 1000;
    var dataLength = 20; // number of dataPoints visible at any point

    var updateChart = function (count) {

      count = count || 1;

      for (var j = 0; j < count; j++) {
        yVal = yVal +  Math.round(5 + Math.random() *(-5-5));
        dps.push({
          x: xVal,
          y: yVal
        });
        xVal++;
      }

      if (dps.length > dataLength) {
        dps.shift();
      }

      // make for loop for individual charts
      for (var i = 0; i < charts.length; i++){
        charts[i].render();
      }
    };

    updateChart(dataLength);
    setInterval(function(){updateChart()}, updateInterval);

  }

  </script>
  </body>


  <script>

    // You can also require other files to run in this process
    require('./dist/renderer.js')
  </script>
</html>
